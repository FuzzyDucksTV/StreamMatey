/*! For license information please see background.js.LICENSE.txt */
(()=>{var e={4993:(e,t,n)=>{const s=n(839);e.exports={client:s,Client:s}},4681:(e,t,n)=>{const s=n(2604),o=n(5049);e.exports=function(e,t){let n=void 0!==e.url?e.url:e.uri;if(o.isURL(n)||(n=`https://api.twitch.tv/kraken${"/"===n[0]?n:`/${n}`}`),o.isNode()){const o=Object.assign({method:"GET",json:!0},e);o.qs&&(n+=`?${new URLSearchParams(o.qs)}`);const r={};"fetchAgent"in this.opts.connection&&(r.agent=this.opts.connection.fetchAgent);const i=s(n,{...r,method:o.method,headers:o.headers,body:o.body});let a={};i.then((e=>(a={statusCode:e.status,headers:e.headers},o.json?e.json():e.text()))).then((e=>t(null,a,e)),(e=>t(e,a,null)))}else{const s=Object.assign({method:"GET",headers:{}},e,{url:n}),o=new XMLHttpRequest;o.open(s.method,s.url,!0);for(const e in s.headers)o.setRequestHeader(e,s.headers[e]);o.responseType="json",o.addEventListener("load",(e=>{4===o.readyState&&(200!==o.status?t(o.status,null,null):t(null,null,o.response))})),o.send()}}},839:(e,t,n)=>{const s=void 0!==n.g?n.g:"undefined"!=typeof window?window:{},o=s.WebSocket||n(8726),r=s.fetch||n(2604),i=n(4681),a=n(2641),c=n(9378).EventEmitter,l=n(7352),u=n(2549),h=n(776),m=n(5049);let p=!1;const f=function e(t){if(this instanceof e==0)return new e(t);this.opts=m.get(t,{}),this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.clientId=m.get(this.opts.options.clientId,null),this._globalDefaultChannel=m.channel(m.get(this.opts.options.globalDefaultChannel,"#tmijs")),this._skipMembership=m.get(this.opts.options.skipMembership,!1),this._skipUpdatingEmotesets=m.get(this.opts.options.skipUpdatingEmotesets,!1),this._updateEmotesetsTimer=null,this._updateEmotesetsTimerDelay=m.get(this.opts.options.updateEmotesetsTimer,6e4),this.maxReconnectAttempts=m.get(this.opts.connection.maxReconnectAttempts,1/0),this.maxReconnectInterval=m.get(this.opts.connection.maxReconnectInterval,3e4),this.reconnect=m.get(this.opts.connection.reconnect,!0),this.reconnectDecay=m.get(this.opts.connection.reconnectDecay,1.5),this.reconnectInterval=m.get(this.opts.connection.reconnectInterval,1e3),this.reconnecting=!1,this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.secure=m.get(this.opts.connection.secure,!this.opts.connection.server&&!this.opts.connection.port),this.emotes="",this.emotesets={},this.channels=[],this.currentLatency=0,this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reason="",this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null;let n="error";this.opts.options.debug&&(n="info"),this.log=this.opts.logger||l;try{l.setLevel(n)}catch(e){}this.opts.channels.forEach(((e,t,n)=>n[t]=m.channel(e))),c.call(this),this.setMaxListeners(0)};m.inherits(f,c);for(const e in a)f.prototype[e]=a[e];f.prototype.emits=function(e,t){for(let n=0;n<e.length;n++){const s=n<t.length?t[n]:t[t.length-1];this.emit.apply(this,[e[n]].concat(s))}},f.prototype.api=function(...e){p||(this.log.warn("Client.prototype.api is deprecated and will be removed for version 2.0.0"),p=!0),i(...e)},f.prototype.handleMessage=function(e){if(!e)return;this.listenerCount("raw_message")&&this.emit("raw_message",JSON.parse(JSON.stringify(e)),e);const t=m.channel(m.get(e.params[0],null));let n=m.get(e.params[1],null);const s=m.get(e.tags["msg-id"],null),o=e.tags=u.badges(u.badgeInfo(u.emotes(e.tags)));for(const e in o){if("emote-sets"===e||"ban-duration"===e||"bits"===e)continue;let t=o[e];"boolean"==typeof t?t=null:"1"===t?t=!0:"0"===t?t=!1:"string"==typeof t&&(t=m.unescapeIRC(t)),o[e]=t}if(null===e.prefix)switch(e.command){case"PING":this.emit("ping"),this._isConnected()&&this.ws.send("PONG");break;case"PONG":{const e=new Date;this.currentLatency=(e.getTime()-this.latency.getTime())/1e3,this.emits(["pong","_promisePing"],[[this.currentLatency]]),clearTimeout(this.pingTimeout);break}default:this.log.warn(`Could not parse message with no prefix:\n${JSON.stringify(e,null,4)}`)}else if("tmi.twitch.tv"===e.prefix)switch(e.command){case"002":case"003":case"004":case"372":case"375":case"CAP":case"SERVERCHANGE":break;case"001":this.username=e.params[0];break;case"376":{this.log.info("Connected to server."),this.userstate[this._globalDefaultChannel]={},this.emits(["connected","_promiseConnect"],[[this.server,this.port],[null]]),this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.pingLoop=setInterval((()=>{this._isConnected()&&this.ws.send("PING"),this.latency=new Date,this.pingTimeout=setTimeout((()=>{null!==this.ws&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer))}),m.get(this.opts.connection.timeout,9999))}),6e4);let e=m.get(this.opts.options.joinInterval,2e3);e<300&&(e=300);const t=new h(e),n=[...new Set([...this.opts.channels,...this.channels])];this.channels=[];for(let e=0;e<n.length;e++){const s=n[e];t.add((()=>{this._isConnected()&&this.join(s).catch((e=>this.log.error(e)))}))}t.next();break}case"NOTICE":{const o=[null],r=[t,s,n],i=[t,!0],a=[t,!1],c=[r,o],l=[r,[s]],u=`[${t}] ${n}`;switch(s){case"subs_on":this.log.info(`[${t}] This room is now in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribers"],[i,i,o]);break;case"subs_off":this.log.info(`[${t}] This room is no longer in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribersoff"],[a,a,o]);break;case"emote_only_on":this.log.info(`[${t}] This room is now in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonly"],[i,o]);break;case"emote_only_off":this.log.info(`[${t}] This room is no longer in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonlyoff"],[a,o]);break;case"slow_on":case"slow_off":case"followers_on_zero":case"followers_on":case"followers_off":case"host_on":case"host_off":break;case"r9k_on":this.log.info(`[${t}] This room is now in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbeta"],[i,i,o]);break;case"r9k_off":this.log.info(`[${t}] This room is no longer in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbetaoff"],[a,a,o]);break;case"room_mods":{const e=n.split(": "),s=(e.length>1?e[1]:"").toLowerCase().split(", ").filter((e=>e));this.emits(["_promiseMods","mods"],[[null,s],[t,s]]);break}case"no_mods":this.emits(["_promiseMods","mods"],[[null,[]],[t,[]]]);break;case"vips_success":{n.endsWith(".")&&(n=n.slice(0,-1));const e=n.split(": "),s=(e.length>1?e[1]:"").toLowerCase().split(", ").filter((e=>e));this.emits(["_promiseVips","vips"],[[null,s],[t,s]]);break}case"no_vips":this.emits(["_promiseVips","vips"],[[null,[]],[t,[]]]);break;case"already_banned":case"bad_ban_admin":case"bad_ban_anon":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_mod":case"bad_ban_self":case"bad_ban_staff":case"usage_ban":this.log.info(u),this.emits(["notice","_promiseBan"],l);break;case"ban_success":this.log.info(u),this.emits(["notice","_promiseBan"],c);break;case"usage_clear":this.log.info(u),this.emits(["notice","_promiseClear"],l);break;case"usage_mods":this.log.info(u),this.emits(["notice","_promiseMods"],[r,[s,[]]]);break;case"mod_success":this.log.info(u),this.emits(["notice","_promiseMod"],c);break;case"usage_vips":this.log.info(u),this.emits(["notice","_promiseVips"],[r,[s,[]]]);break;case"usage_vip":case"bad_vip_grantee_banned":case"bad_vip_grantee_already_vip":case"bad_vip_max_vips_reached":case"bad_vip_achievement_incomplete":this.log.info(u),this.emits(["notice","_promiseVip"],[r,[s,[]]]);break;case"vip_success":this.log.info(u),this.emits(["notice","_promiseVip"],c);break;case"usage_mod":case"bad_mod_banned":case"bad_mod_mod":this.log.info(u),this.emits(["notice","_promiseMod"],l);break;case"unmod_success":this.log.info(u),this.emits(["notice","_promiseUnmod"],c);break;case"unvip_success":this.log.info(u),this.emits(["notice","_promiseUnvip"],c);break;case"usage_unmod":case"bad_unmod_mod":this.log.info(u),this.emits(["notice","_promiseUnmod"],l);break;case"usage_unvip":case"bad_unvip_grantee_not_vip":this.log.info(u),this.emits(["notice","_promiseUnvip"],l);break;case"color_changed":this.log.info(u),this.emits(["notice","_promiseColor"],c);break;case"usage_color":case"turbo_only_color":this.log.info(u),this.emits(["notice","_promiseColor"],l);break;case"commercial_success":this.log.info(u),this.emits(["notice","_promiseCommercial"],c);break;case"usage_commercial":case"bad_commercial_error":this.log.info(u),this.emits(["notice","_promiseCommercial"],l);break;case"hosts_remaining":{this.log.info(u);const e=isNaN(n[0])?0:parseInt(n[0]);this.emits(["notice","_promiseHost"],[r,[null,~~e]]);break}case"bad_host_hosting":case"bad_host_rate_exceeded":case"bad_host_error":case"usage_host":this.log.info(u),this.emits(["notice","_promiseHost"],[r,[s,null]]);break;case"already_r9k_on":case"usage_r9k_on":this.log.info(u),this.emits(["notice","_promiseR9kbeta"],l);break;case"already_r9k_off":case"usage_r9k_off":this.log.info(u),this.emits(["notice","_promiseR9kbetaoff"],l);break;case"timeout_success":this.log.info(u),this.emits(["notice","_promiseTimeout"],c);break;case"delete_message_success":this.log.info(`[${t} ${n}]`),this.emits(["notice","_promiseDeletemessage"],c);break;case"already_subs_off":case"usage_subs_off":this.log.info(u),this.emits(["notice","_promiseSubscribersoff"],l);break;case"already_subs_on":case"usage_subs_on":this.log.info(u),this.emits(["notice","_promiseSubscribers"],l);break;case"already_emote_only_off":case"usage_emote_only_off":this.log.info(u),this.emits(["notice","_promiseEmoteonlyoff"],l);break;case"already_emote_only_on":case"usage_emote_only_on":this.log.info(u),this.emits(["notice","_promiseEmoteonly"],l);break;case"usage_slow_on":this.log.info(u),this.emits(["notice","_promiseSlow"],l);break;case"usage_slow_off":this.log.info(u),this.emits(["notice","_promiseSlowoff"],l);break;case"usage_timeout":case"bad_timeout_admin":case"bad_timeout_anon":case"bad_timeout_broadcaster":case"bad_timeout_duration":case"bad_timeout_global_mod":case"bad_timeout_mod":case"bad_timeout_self":case"bad_timeout_staff":this.log.info(u),this.emits(["notice","_promiseTimeout"],l);break;case"untimeout_success":case"unban_success":this.log.info(u),this.emits(["notice","_promiseUnban"],c);break;case"usage_unban":case"bad_unban_no_ban":this.log.info(u),this.emits(["notice","_promiseUnban"],l);break;case"usage_delete":case"bad_delete_message_error":case"bad_delete_message_broadcaster":case"bad_delete_message_mod":this.log.info(u),this.emits(["notice","_promiseDeletemessage"],l);break;case"usage_unhost":case"not_hosting":this.log.info(u),this.emits(["notice","_promiseUnhost"],l);break;case"whisper_invalid_login":case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted":case"whisper_restricted_recipient":this.log.info(u),this.emits(["notice","_promiseWhisper"],l);break;case"no_permission":case"msg_banned":case"msg_room_not_found":case"msg_channel_suspended":case"tos_ban":case"invalid_user":this.log.info(u),this.emits(["notice","_promiseBan","_promiseClear","_promiseUnban","_promiseTimeout","_promiseDeletemessage","_promiseMods","_promiseMod","_promiseUnmod","_promiseVips","_promiseVip","_promiseUnvip","_promiseCommercial","_promiseHost","_promiseUnhost","_promiseJoin","_promisePart","_promiseR9kbeta","_promiseR9kbetaoff","_promiseSlow","_promiseSlowoff","_promiseFollowers","_promiseFollowersoff","_promiseSubscribers","_promiseSubscribersoff","_promiseEmoteonly","_promiseEmoteonlyoff","_promiseWhisper"],[r,[s,t]]);break;case"msg_rejected":case"msg_rejected_mandatory":this.log.info(u),this.emit("automod",t,s,n);break;case"unrecognized_cmd":case"cmds_available":case"host_target_went_offline":case"msg_censored_broadcaster":case"msg_duplicate":case"msg_emoteonly":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"msg_bad_characters":case"msg_channel_blocked":case"msg_facebook":case"msg_followersonly":case"msg_followersonly_followed":case"msg_followersonly_zero":case"msg_slowmode":case"msg_suspended":case"no_help":case"usage_disconnect":case"usage_help":case"usage_me":case"unavailable_command":this.log.info(u),this.emit("notice",t,s,n);break;default:n.includes("Login unsuccessful")||n.includes("Login authentication failed")||n.includes("Error logging in")||n.includes("Improperly formatted auth")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=n,this.log.error(this.reason),this.ws.close()):n.includes("Invalid NICK")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Invalid NICK.",this.log.error(this.reason),this.ws.close()):(this.log.warn(`Could not parse NOTICE from tmi.twitch.tv:\n${JSON.stringify(e,null,4)}`),this.emit("notice",t,s,n))}break}case"USERNOTICE":{const e=o["display-name"]||o.login,r=o["msg-param-sub-plan"]||"",i=m.unescapeIRC(m.get(o["msg-param-sub-plan-name"],""))||null,a={prime:r.includes("Prime"),plan:r,planName:i},c=~~(o["msg-param-streak-months"]||0),l=o["msg-param-recipient-display-name"]||o["msg-param-recipient-user-name"],u=~~o["msg-param-mass-gift-count"];switch(o["message-type"]=s,s){case"resub":this.emits(["resub","subanniversary"],[[t,e,c,n,o,a]]);break;case"sub":this.emits(["subscription","sub"],[[t,e,a,n,o]]);break;case"subgift":this.emit("subgift",t,e,c,l,a,o);break;case"anonsubgift":this.emit("anonsubgift",t,c,l,a,o);break;case"submysterygift":this.emit("submysterygift",t,e,u,a,o);break;case"anonsubmysterygift":this.emit("anonsubmysterygift",t,u,a,o);break;case"primepaidupgrade":this.emit("primepaidupgrade",t,e,a,o);break;case"giftpaidupgrade":{const n=o["msg-param-sender-name"]||o["msg-param-sender-login"];this.emit("giftpaidupgrade",t,e,n,o);break}case"anongiftpaidupgrade":this.emit("anongiftpaidupgrade",t,e,o);break;case"raid":{const e=o["msg-param-displayName"]||o["msg-param-login"],n=+o["msg-param-viewerCount"];this.emit("raided",t,e,n,o);break}case"ritual":{const s=o["msg-param-ritual-name"];"new_chatter"===s?this.emit("newchatter",t,e,o,n):this.emit("ritual",s,t,e,o,n);break}default:this.emit("usernotice",s,t,o,n)}break}case"HOSTTARGET":{const e=n.split(" "),s=~~e[1]||0;"-"===e[0]?(this.log.info(`[${t}] Exited host mode.`),this.emits(["unhost","_promiseUnhost"],[[t,s],[null]])):(this.log.info(`[${t}] Now hosting ${e[0]} for ${s} viewer(s).`),this.emit("hosting",t,e[0],s));break}case"CLEARCHAT":if(e.params.length>1){const s=m.get(e.tags["ban-duration"],null);null===s?(this.log.info(`[${t}] ${n} has been banned.`),this.emit("ban",t,n,null,e.tags)):(this.log.info(`[${t}] ${n} has been timed out for ${s} seconds.`),this.emit("timeout",t,n,null,~~s,e.tags))}else this.log.info(`[${t}] Chat was cleared by a moderator.`),this.emits(["clearchat","_promiseClear"],[[t],[null]]);break;case"CLEARMSG":if(e.params.length>1){const e=n,s=o.login;o["message-type"]="messagedeleted",this.log.info(`[${t}] ${s}'s message has been deleted.`),this.emit("messagedeleted",t,s,e,o)}break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info(`Disconnecting and reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.disconnect().catch((e=>this.log.error(e))),setTimeout((()=>this.connect().catch((e=>this.log.error(e)))),this.reconnectTimer);break;case"USERSTATE":e.tags.username=this.username,"mod"===e.tags["user-type"]&&(this.moderators[t]||(this.moderators[t]=[]),this.moderators[t].includes(this.username)||this.moderators[t].push(this.username)),m.isJustinfan(this.getUsername())||this.userstate[t]||(this.userstate[t]=o,this.lastJoined=t,this.channels.push(t),this.log.info(`Joined ${t}`),this.emit("join",t,m.username(this.getUsername()),!0)),e.tags["emote-sets"]!==this.emotes&&this._updateEmoteset(e.tags["emote-sets"]),this.userstate[t]=o;break;case"GLOBALUSERSTATE":this.globaluserstate=o,this.emit("globaluserstate",o),void 0!==e.tags["emote-sets"]&&this._updateEmoteset(e.tags["emote-sets"]);break;case"ROOMSTATE":if(m.channel(this.lastJoined)===t&&this.emit("_promiseJoin",null,t),e.tags.channel=t,this.emit("roomstate",t,e.tags),!m.hasOwn(e.tags,"subs-only")){if(m.hasOwn(e.tags,"slow"))if("boolean"!=typeof e.tags.slow||e.tags.slow){const n=[t,!0,~~e.tags.slow];this.log.info(`[${t}] This room is now in slow mode.`),this.emits(["slow","slowmode","_promiseSlow"],[n,n,[null]])}else{const e=[t,!1,0];this.log.info(`[${t}] This room is no longer in slow mode.`),this.emits(["slow","slowmode","_promiseSlowoff"],[e,e,[null]])}if(m.hasOwn(e.tags,"followers-only"))if("-1"===e.tags["followers-only"]){const e=[t,!1,0];this.log.info(`[${t}] This room is no longer in followers-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowersoff"],[e,e,[null]])}else{const n=[t,!0,~~e.tags["followers-only"]];this.log.info(`[${t}] This room is now in follower-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowers"],[n,n,[null]])}}break;default:this.log.warn(`Could not parse message from tmi.twitch.tv:\n${JSON.stringify(e,null,4)}`)}else if("jtv"===e.prefix)"MODE"===e.command?"+o"===n?(this.moderators[t]||(this.moderators[t]=[]),this.moderators[t].includes(e.params[2])||this.moderators[t].push(e.params[2]),this.emit("mod",t,e.params[2])):"-o"===n&&(this.moderators[t]||(this.moderators[t]=[]),this.moderators[t].filter((t=>t!==e.params[2])),this.emit("unmod",t,e.params[2])):this.log.warn(`Could not parse message from jtv:\n${JSON.stringify(e,null,4)}`);else switch(e.command){case"353":this.emit("names",e.params[2],e.params[3].split(" "));break;case"366":break;case"JOIN":{const n=e.prefix.split("!")[0];m.isJustinfan(this.getUsername())&&this.username===n&&(this.lastJoined=t,this.channels.push(t),this.log.info(`Joined ${t}`),this.emit("join",t,n,!0)),this.username!==n&&this.emit("join",t,n,!1);break}case"PART":{let n=!1;const s=e.prefix.split("!")[0];if(this.username===s){n=!0,this.userstate[t]&&delete this.userstate[t];let e=this.channels.indexOf(t);-1!==e&&this.channels.splice(e,1),e=this.opts.channels.indexOf(t),-1!==e&&this.opts.channels.splice(e,1),this.log.info(`Left ${t}`),this.emit("_promisePart",null)}this.emit("part",t,s,n);break}case"WHISPER":{const t=e.prefix.split("!")[0];this.log.info(`[WHISPER] <${t}>: ${n}`),m.hasOwn(e.tags,"username")||(e.tags.username=t),e.tags["message-type"]="whisper";const s=m.channel(e.tags.username);this.emits(["whisper","message"],[[s,e.tags,n,!1]]);break}case"PRIVMSG":if(e.tags.username=e.prefix.split("!")[0],"jtv"===e.tags.username){const e=m.username(n.split(" ")[0]),s=n.includes("auto");if(n.includes("hosting you for")){const o=m.extractNumber(n);this.emit("hosted",t,e,o,s)}else n.includes("hosting you")&&this.emit("hosted",t,e,0,s)}else{const s=m.get(this.opts.options.messagesLogLevel,"info"),o=m.actionMessage(n);if(e.tags["message-type"]=o?"action":"chat",n=o?o[1]:n,m.hasOwn(e.tags,"bits"))this.emit("cheer",t,e.tags,n);else{if(m.hasOwn(e.tags,"msg-id")){if("highlighted-message"===e.tags["msg-id"]){const s=e.tags["msg-id"];this.emit("redeem",t,e.tags.username,s,e.tags,n)}else if("skip-subs-mode-message"===e.tags["msg-id"]){const s=e.tags["msg-id"];this.emit("redeem",t,e.tags.username,s,e.tags,n)}}else if(m.hasOwn(e.tags,"custom-reward-id")){const s=e.tags["custom-reward-id"];this.emit("redeem",t,e.tags.username,s,e.tags,n)}o?(this.log[s](`[${t}] *<${e.tags.username}>: ${n}`),this.emits(["action","message"],[[t,e.tags,n,!1]])):(this.log[s](`[${t}] <${e.tags.username}>: ${n}`),this.emits(["chat","message"],[[t,e.tags,n,!1]]))}}break;default:this.log.warn(`Could not parse message:\n${JSON.stringify(e,null,4)}`)}},f.prototype.connect=function(){return new Promise(((e,t)=>{this.server=m.get(this.opts.connection.server,"irc-ws.chat.twitch.tv"),this.port=m.get(this.opts.connection.port,80),this.secure&&(this.port=443),443===this.port&&(this.secure=!0),this.reconnectTimer=this.reconnectTimer*this.reconnectDecay,this.reconnectTimer>=this.maxReconnectInterval&&(this.reconnectTimer=this.maxReconnectInterval),this._openConnection(),this.once("_promiseConnect",(n=>{n?t(n):e([this.server,~~this.port])}))}))},f.prototype._openConnection=function(){const e=`${this.secure?"wss":"ws"}://${this.server}:${this.port}/`,t={};"agent"in this.opts.connection&&(t.agent=this.opts.connection.agent),this.ws=new o(e,"irc",t),this.ws.onmessage=this._onMessage.bind(this),this.ws.onerror=this._onError.bind(this),this.ws.onclose=this._onClose.bind(this),this.ws.onopen=this._onOpen.bind(this)},f.prototype._onOpen=function(){this._isConnected()&&(this.log.info(`Connecting to ${this.server} on port ${this.port}..`),this.emit("connecting",this.server,~~this.port),this.username=m.get(this.opts.identity.username,m.justinfan()),this._getToken().then((e=>{const t=m.password(e);this.log.info("Sending authentication to server.."),this.emit("logon");let n="twitch.tv/tags twitch.tv/commands";this._skipMembership||(n+=" twitch.tv/membership"),this.ws.send("CAP REQ :"+n),t?this.ws.send(`PASS ${t}`):m.isJustinfan(this.username)&&this.ws.send("PASS SCHMOOPIIE"),this.ws.send(`NICK ${this.username}`)})).catch((e=>{this.emits(["_promiseConnect","disconnected"],[[e],["Could not get a token."]])})))},f.prototype._getToken=function(){const e=this.opts.identity.password;let t;return"function"==typeof e?(t=e(),t instanceof Promise?t:Promise.resolve(t)):Promise.resolve(e)},f.prototype._onMessage=function(e){e.data.trim().split("\r\n").forEach((e=>{const t=u.msg(e);t&&this.handleMessage(t)}))},f.prototype._onError=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.reason=null===this.ws?"Connection closed.":"Unable to connect.",this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout((()=>{this.reconnecting=!1,this.connect().catch((e=>this.log.error(e)))}),this.reconnectTimer)),this.ws=null},f.prototype._onClose=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.wasCloseCalled?(this.wasCloseCalled=!1,this.reason="Connection closed.",this.log.info(this.reason),this.emits(["_promiseConnect","_promiseDisconnect","disconnected"],[[this.reason],[null],[this.reason]])):(this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Could not connect to server. Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout((()=>{this.reconnecting=!1,this.connect().catch((e=>this.log.error(e)))}),this.reconnectTimer))),this.ws=null},f.prototype._getPromiseDelay=function(){return this.currentLatency<=600?600:this.currentLatency+100},f.prototype._sendCommand=function(e,t,n,s){return new Promise(((o,r)=>{if(!this._isConnected())return r("Not connected to server.");if(null!==e&&"number"!=typeof e||(null===e&&(e=this._getPromiseDelay()),m.promiseDelay(e).then((()=>r("No response from Twitch.")))),null!==t){const e=m.channel(t);this.log.info(`[${e}] Executing command: ${n}`),this.ws.send(`PRIVMSG ${e} :${n}`)}else this.log.info(`Executing command: ${n}`),this.ws.send(n);"function"==typeof s?s(o,r):o()}))},f.prototype._sendMessage=function(e,t,n,s){return new Promise(((o,r)=>{if(!this._isConnected())return r("Not connected to server.");if(m.isJustinfan(this.getUsername()))return r("Cannot send anonymous messages.");const i=m.channel(t);if(this.userstate[i]||(this.userstate[i]={}),n.length>=500){const s=m.splitLine(n,500);n=s[0],setTimeout((()=>{this._sendMessage(e,t,s[1],(()=>{}))}),350)}this.ws.send(`PRIVMSG ${i} :${n}`);const a={};Object.keys(this.emotesets).forEach((e=>this.emotesets[e].forEach((e=>(m.isRegex(e.code)?u.emoteRegex:u.emoteString)(n,e.code,e.id,a)))));const c=Object.assign(this.userstate[i],u.emotes({emotes:u.transformEmotes(a)||null})),l=m.get(this.opts.options.messagesLogLevel,"info"),h=m.actionMessage(n);h?(c["message-type"]="action",this.log[l](`[${i}] *<${this.getUsername()}>: ${h[1]}`),this.emits(["action","message"],[[i,c,h[1],!0]])):(c["message-type"]="chat",this.log[l](`[${i}] <${this.getUsername()}>: ${n}`),this.emits(["chat","message"],[[i,c,n,!0]])),"function"==typeof s?s(o,r):o()}))},f.prototype._updateEmoteset=function(e){let t=void 0!==e;if(t&&(e===this.emotes?t=!1:this.emotes=e),this._skipUpdatingEmotesets)return void(t&&this.emit("emotesets",e,{}));const n=()=>{this._updateEmotesetsTimerDelay>0&&(clearTimeout(this._updateEmotesetsTimer),this._updateEmotesetsTimer=setTimeout((()=>this._updateEmoteset(e)),this._updateEmotesetsTimerDelay))};this._getToken().then((t=>{const n=`https://api.twitch.tv/kraken/chat/emoticon_images?emotesets=${e}`,s={};return"fetchAgent"in this.opts.connection&&(s.agent=this.opts.connection.fetchAgent),r(n,{...s,headers:{Accept:"application/vnd.twitchtv.v5+json",Authorization:`OAuth ${m.token(t)}`,"Client-ID":this.clientId}})})).then((e=>e.json())).then((t=>{this.emotesets=t.emoticon_sets||{},this.emit("emotesets",e,this.emotesets),n()})).catch((()=>n()))},f.prototype.getUsername=function(){return this.username},f.prototype.getOptions=function(){return this.opts},f.prototype.getChannels=function(){return this.channels},f.prototype.isMod=function(e,t){const n=m.channel(e);return this.moderators[n]||(this.moderators[n]=[]),this.moderators[n].includes(m.username(t))},f.prototype.readyState=function(){return null===this.ws?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},f.prototype._isConnected=function(){return null!==this.ws&&1===this.ws.readyState},f.prototype.disconnect=function(){return new Promise(((e,t)=>{null!==this.ws&&3!==this.ws.readyState?(this.wasCloseCalled=!0,this.log.info("Disconnecting from server.."),this.ws.close(),this.once("_promiseDisconnect",(()=>e([this.server,~~this.port])))):(this.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),t("Cannot disconnect from server. Socket is not opened or connection is already closing."))}))},f.prototype.off=f.prototype.removeListener,e.exports&&(e.exports=f),"undefined"!=typeof window&&(window.tmi={client:f,Client:f})},2641:(e,t,n)=>{const s=n(5049);function o(e,t){return e=s.channel(e),t=s.get(t,30),this._sendCommand(null,e,`/followers ${t}`,((n,s)=>{this.once("_promiseFollowers",(o=>{o?s(o):n([e,~~t])}))}))}function r(e){return e=s.channel(e),this._sendCommand(null,e,"/followersoff",((t,n)=>{this.once("_promiseFollowersoff",(s=>{s?n(s):t([e])}))}))}function i(e){return e=s.channel(e),this._sendCommand(null,null,`PART ${e}`,((t,n)=>{this.once("_promisePart",(s=>{s?n(s):t([e])}))}))}function a(e){return e=s.channel(e),this._sendCommand(null,e,"/r9kbeta",((t,n)=>{this.once("_promiseR9kbeta",(s=>{s?n(s):t([e])}))}))}function c(e){return e=s.channel(e),this._sendCommand(null,e,"/r9kbetaoff",((t,n)=>{this.once("_promiseR9kbetaoff",(s=>{s?n(s):t([e])}))}))}function l(e,t){return e=s.channel(e),t=s.get(t,300),this._sendCommand(null,e,`/slow ${t}`,((n,s)=>{this.once("_promiseSlow",(o=>{o?s(o):n([e,~~t])}))}))}function u(e){return e=s.channel(e),this._sendCommand(null,e,"/slowoff",((t,n)=>{this.once("_promiseSlowoff",(s=>{s?n(s):t([e])}))}))}e.exports={action(e,t){return e=s.channel(e),t=`ACTION ${t}`,this._sendMessage(this._getPromiseDelay(),e,t,((n,s)=>{n([e,t])}))},ban(e,t,n){return e=s.channel(e),t=s.username(t),n=s.get(n,""),this._sendCommand(null,e,`/ban ${t} ${n}`,((s,o)=>{this.once("_promiseBan",(r=>{r?o(r):s([e,t,n])}))}))},clear(e){return e=s.channel(e),this._sendCommand(null,e,"/clear",((t,n)=>{this.once("_promiseClear",(s=>{s?n(s):t([e])}))}))},color(e,t){return t=s.get(t,e),this._sendCommand(null,"#tmijs",`/color ${t}`,((e,n)=>{this.once("_promiseColor",(s=>{s?n(s):e([t])}))}))},commercial(e,t){return e=s.channel(e),t=s.get(t,30),this._sendCommand(null,e,`/commercial ${t}`,((n,s)=>{this.once("_promiseCommercial",(o=>{o?s(o):n([e,~~t])}))}))},deletemessage(e,t){return e=s.channel(e),this._sendCommand(null,e,`/delete ${t}`,((t,n)=>{this.once("_promiseDeletemessage",(s=>{s?n(s):t([e])}))}))},emoteonly(e){return e=s.channel(e),this._sendCommand(null,e,"/emoteonly",((t,n)=>{this.once("_promiseEmoteonly",(s=>{s?n(s):t([e])}))}))},emoteonlyoff(e){return e=s.channel(e),this._sendCommand(null,e,"/emoteonlyoff",((t,n)=>{this.once("_promiseEmoteonlyoff",(s=>{s?n(s):t([e])}))}))},followersonly:o,followersmode:o,followersonlyoff:r,followersmodeoff:r,host(e,t){return e=s.channel(e),t=s.username(t),this._sendCommand(2e3,e,`/host ${t}`,((n,s)=>{this.once("_promiseHost",((o,r)=>{o?s(o):n([e,t,~~r])}))}))},join(e){return e=s.channel(e),this._sendCommand(void 0,null,`JOIN ${e}`,((t,n)=>{const o="_promiseJoin";let r=!1;const i=(a,c)=>{e===s.channel(c)&&(this.removeListener(o,i),r=!0,a?n(a):t([e]))};this.on(o,i);const a=this._getPromiseDelay();s.promiseDelay(a).then((()=>{r||this.emit(o,"No response from Twitch.",e)}))}))},mod(e,t){return e=s.channel(e),t=s.username(t),this._sendCommand(null,e,`/mod ${t}`,((n,s)=>{this.once("_promiseMod",(o=>{o?s(o):n([e,t])}))}))},mods(e){return e=s.channel(e),this._sendCommand(null,e,"/mods",((t,n)=>{this.once("_promiseMods",((s,o)=>{s?n(s):(o.forEach((t=>{this.moderators[e]||(this.moderators[e]=[]),this.moderators[e].includes(t)||this.moderators[e].push(t)})),t(o))}))}))},part:i,leave:i,ping(){return this._sendCommand(null,null,"PING",((e,t)=>{this.latency=new Date,this.pingTimeout=setTimeout((()=>{null!==this.ws&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout))}),s.get(this.opts.connection.timeout,9999)),this.once("_promisePing",(t=>e([parseFloat(t)])))}))},r9kbeta:a,r9kmode:a,r9kbetaoff:c,r9kmodeoff:c,raw(e){return this._sendCommand(null,null,e,((t,n)=>{t([e])}))},say(e,t){return e=s.channel(e),t.startsWith(".")&&!t.startsWith("..")||t.startsWith("/")||t.startsWith("\\")?"me "===t.substr(1,3)?this.action(e,t.substr(4)):this._sendCommand(null,e,t,((n,s)=>{n([e,t])})):this._sendMessage(this._getPromiseDelay(),e,t,((n,s)=>{n([e,t])}))},slow:l,slowmode:l,slowoff:u,slowmodeoff:u,subscribers(e){return e=s.channel(e),this._sendCommand(null,e,"/subscribers",((t,n)=>{this.once("_promiseSubscribers",(s=>{s?n(s):t([e])}))}))},subscribersoff(e){return e=s.channel(e),this._sendCommand(null,e,"/subscribersoff",((t,n)=>{this.once("_promiseSubscribersoff",(s=>{s?n(s):t([e])}))}))},timeout(e,t,n,o){return e=s.channel(e),t=s.username(t),null===n||s.isInteger(n)||(o=n,n=300),n=s.get(n,300),o=s.get(o,""),this._sendCommand(null,e,`/timeout ${t} ${n} ${o}`,((s,r)=>{this.once("_promiseTimeout",(i=>{i?r(i):s([e,t,~~n,o])}))}))},unban(e,t){return e=s.channel(e),t=s.username(t),this._sendCommand(null,e,`/unban ${t}`,((n,s)=>{this.once("_promiseUnban",(o=>{o?s(o):n([e,t])}))}))},unhost(e){return e=s.channel(e),this._sendCommand(2e3,e,"/unhost",((t,n)=>{this.once("_promiseUnhost",(s=>{s?n(s):t([e])}))}))},unmod(e,t){return e=s.channel(e),t=s.username(t),this._sendCommand(null,e,`/unmod ${t}`,((n,s)=>{this.once("_promiseUnmod",(o=>{o?s(o):n([e,t])}))}))},unvip(e,t){return e=s.channel(e),t=s.username(t),this._sendCommand(null,e,`/unvip ${t}`,((n,s)=>{this.once("_promiseUnvip",(o=>{o?s(o):n([e,t])}))}))},vip(e,t){return e=s.channel(e),t=s.username(t),this._sendCommand(null,e,`/vip ${t}`,((n,s)=>{this.once("_promiseVip",(o=>{o?s(o):n([e,t])}))}))},vips(e){return e=s.channel(e),this._sendCommand(null,e,"/vips",((e,t)=>{this.once("_promiseVips",((n,s)=>{n?t(n):e(s)}))}))},whisper(e,t){return(e=s.username(e))===this.getUsername()?Promise.reject("Cannot send a whisper to the same account."):this._sendCommand(null,"#tmijs",`/w ${e} ${t}`,((e,t)=>{this.once("_promiseWhisper",(e=>{e&&t(e)}))})).catch((n=>{if(n&&"string"==typeof n&&0!==n.indexOf("No response from Twitch."))throw n;const o=s.channel(e),r=Object.assign({"message-type":"whisper","message-id":null,"thread-id":null,username:this.getUsername()},this.globaluserstate);return this.emits(["whisper","message"],[[o,r,t,!0],[o,r,t,!0]]),[e,t]}))}}},9378:e=>{function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,r,i,a,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(o(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(s(r))for(a=Array.prototype.slice.call(arguments,1),i=(l=r.slice()).length,c=0;c<i;c++)l[c].apply(this,a);return!0},t.prototype.addListener=function(e,r){var i;if(!n(r))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(r.listener)?r.listener:r),this._events[e]?s(this._events[e])?this._events[e].push(r):this._events[e]=[this._events[e],r]:this._events[e]=r,s(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?t.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var s=!1;if(this._events.hasOwnProperty(e)&&"_"===e.charAt(0)){var o=1,r=e;for(var i in this._events)this._events.hasOwnProperty(i)&&i.startsWith(r)&&o++;e+=o}function a(){"_"!==e.charAt(0)||isNaN(e.substr(e.length-1))||(e=e.substring(0,e.length-1)),this.removeListener(e,a),s||(s=!0,t.apply(this,arguments))}return a.listener=t,this.on(e,a),this},t.prototype.removeListener=function(e,t){var o,r,i,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(o=this._events[e]).length,r=-1,o===t||n(o.listener)&&o.listener===t){if(delete this._events[e],this._events.hasOwnProperty(e+"2")&&"_"===e.charAt(0)){var c=e;for(var l in this._events)this._events.hasOwnProperty(l)&&l.startsWith(c)&&(isNaN(parseInt(l.substr(l.length-1)))||(this._events[e+parseInt(l.substr(l.length-1)-1)]=this._events[l],delete this._events[l]));this._events[e]=this._events[e+"1"],delete this._events[e+"1"]}this._events.removeListener&&this.emit("removeListener",e,t)}else if(s(o)){for(a=i;a-- >0;)if(o[a]===t||o[a].listener&&o[a].listener===t){r=a;break}if(r<0)return this;1===o.length?(o.length=0,delete this._events[e]):o.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,s;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(s=this._events[e]))this.removeListener(e,s);else if(s)for(;s.length;)this.removeListener(e,s[s.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}},7352:(e,t,n)=>{const s=n(5049);let o="info";const r={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};function i(e){return function(t){r[e]>=r[o]&&console.log(`[${s.formatDate(new Date)}] ${e}: ${t}`)}}e.exports={setLevel(e){o=e},trace:i("trace"),debug:i("debug"),info:i("info"),warn:i("warn"),error:i("error"),fatal:i("fatal")}},2549:(e,t,n)=>{const s=n(5049),o=/\S+/g;function r(e,t,n=",",s="/",o){const r=e[t];if(void 0===r)return e;const i="string"==typeof r;if(e[t+"-raw"]=i?r:null,!0===r)return e[t]=null,e;if(e[t]={},i){const i=r.split(n);for(let n=0;n<i.length;n++){const r=i[n].split(s);let a=r[1];void 0!==o&&a&&(a=a.split(o)),e[t][r[0]]=a||null}}return e}e.exports={badges:e=>r(e,"badges"),badgeInfo:e=>r(e,"badge-info"),emotes:e=>r(e,"emotes","/",":",","),emoteRegex(e,t,n,r){o.lastIndex=0;const i=new RegExp("(\\b|^|\\s)"+s.unescapeHtml(t)+"(\\b|$|\\s)");let a;for(;null!==(a=o.exec(e));)i.test(a[0])&&(r[n]=r[n]||[],r[n].push([a.index,o.lastIndex-1]))},emoteString(e,t,n,r){let i;for(o.lastIndex=0;null!==(i=o.exec(e));)i[0]===s.unescapeHtml(t)&&(r[n]=r[n]||[],r[n].push([i.index,o.lastIndex-1]))},transformEmotes(e){let t="";return Object.keys(e).forEach((n=>{t=`${t+n}:`,e[n].forEach((e=>t=`${t+e.join("-")},`)),t=`${t.slice(0,-1)}/`})),t.slice(0,-1)},formTags(e){const t=[];for(const n in e){const o=s.escapeIRC(e[n]);t.push(`${n}=${o}`)}return`@${t.join(";")}`},msg(e){const t={raw:e,tags:{},prefix:null,command:null,params:[]};let n=0,s=0;if(64===e.charCodeAt(0)){if(s=e.indexOf(" "),-1===s)return null;const o=e.slice(1,s).split(";");for(let e=0;e<o.length;e++){const n=o[e],s=n.split("=");t.tags[s[0]]=n.substring(n.indexOf("=")+1)||!0}n=s+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(s=e.indexOf(" ",n),-1===s)return null;for(t.prefix=e.slice(n+1,s),n=s+1;32===e.charCodeAt(n);)n++}if(s=e.indexOf(" ",n),-1===s)return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,s),n=s+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(s=e.indexOf(" ",n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1===s){if(-1===s){t.params.push(e.slice(n));break}}else for(t.params.push(e.slice(n,s)),n=s+1;32===e.charCodeAt(n);)n++}return t}}},776:e=>{e.exports=class{constructor(e){this.queue=[],this.index=0,this.defaultDelay=void 0===e?3e3:e}add(e,t){this.queue.push({fn:e,delay:t})}next(){const e=this.index++,t=this.queue[e];if(!t)return;const n=this.queue[this.index];if(t.fn(),n){const e=void 0===n.delay?this.defaultDelay:n.delay;setTimeout((()=>this.next()),e)}}}},5049:e=>{const t=/^\u0001ACTION ([^\u0001]+)\u0001$/,n=/^(justinfan)(\d+$)/,s=/\\([sn:r\\])/g,o=/([ \n;\r\\])/g,r={s:" ",n:"",":":";",r:""},i={" ":"s","\n":"n",";":":","\r":"r"},a=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),c=/[|\\^$*+?:#]/,l=e.exports={get:(e,t)=>void 0===e?t:e,hasOwn:(e,t)=>({}.hasOwnProperty.call(e,t)),promiseDelay:e=>new Promise((t=>setTimeout(t,e))),isFinite:e=>isFinite(e)&&!isNaN(parseFloat(e)),toNumber(e,t){if(null===e)return 0;const n=Math.pow(10,l.isFinite(t)?t:0);return Math.round(e*n)/n},isInteger:e=>!isNaN(l.toNumber(e,0)),isRegex:e=>c.test(e),isURL:e=>a.test(e),justinfan:()=>`justinfan${Math.floor(8e4*Math.random()+1e3)}`,isJustinfan:e=>n.test(e),channel(e){const t=(e||"").toLowerCase();return"#"===t[0]?t:"#"+t},username(e){const t=(e||"").toLowerCase();return"#"===t[0]?t.slice(1):t},token:e=>e?e.toLowerCase().replace("oauth:",""):"",password(e){const t=l.token(e);return t?`oauth:${t}`:""},actionMessage:e=>e.match(t),replaceAll(e,t){if(null==e)return null;for(const n in t)e=e.replace(new RegExp(n,"g"),t[n]);return e},unescapeHtml:e=>e.replace(/\\&amp\\;/g,"&").replace(/\\&lt\\;/g,"<").replace(/\\&gt\\;/g,">").replace(/\\&quot\\;/g,'"').replace(/\\&#039\\;/g,"'"),unescapeIRC:e=>e&&"string"==typeof e&&e.includes("\\")?e.replace(s,((e,t)=>t in r?r[t]:t)):e,escapeIRC:e=>e&&"string"==typeof e?e.replace(o,((e,t)=>t in i?`\\${i[t]}`:t)):e,addWord:(e,t)=>e.length?e+" "+t:e+t,splitLine(e,t){let n=e.substring(0,t).lastIndexOf(" ");return-1===n&&(n=t-1),[e.substring(0,n),e.substring(n+1)]},extractNumber(e){const t=e.split(" ");for(let e=0;e<t.length;e++)if(l.isInteger(t[e]))return~~t[e];return 0},formatDate(e){let t=e.getHours(),n=e.getMinutes();return t=(t<10?"0":"")+t,n=(n<10?"0":"")+n,`${t}:${n}`},inherits(e,t){e.super_=t;const n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},isNode(){try{return"object"==typeof process&&"[object process]"===Object.prototype.toString.call(process)}catch(e){}return!1}}},2604:()=>{},8726:()=>{},7218:(e,t,n)=>{"use strict";function s(e,t){return function(){return e.apply(t,arguments)}}const{toString:o}=Object.prototype,{getPrototypeOf:r}=Object,i=(a=Object.create(null),e=>{const t=o.call(e);return a[t]||(a[t]=t.slice(8,-1).toLowerCase())});var a;const c=e=>(e=e.toLowerCase(),t=>i(t)===e),l=e=>t=>typeof t===e,{isArray:u}=Array,h=l("undefined"),m=c("ArrayBuffer"),p=l("string"),f=l("function"),d=l("number"),g=e=>null!==e&&"object"==typeof e,y=e=>{if("object"!==i(e))return!1;const t=r(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},_=c("Date"),b=c("File"),w=c("Blob"),v=c("FileList"),E=c("URLSearchParams");function C(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let s,o;if("object"!=typeof e&&(e=[e]),u(e))for(s=0,o=e.length;s<o;s++)t.call(null,e[s],s,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),r=o.length;let i;for(s=0;s<r;s++)i=o[s],t.call(null,e[i],i,e)}}function T(e,t){t=t.toLowerCase();const n=Object.keys(e);let s,o=n.length;for(;o-- >0;)if(s=n[o],t===s.toLowerCase())return s;return null}const O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,k=e=>!h(e)&&e!==O,x=(S="undefined"!=typeof Uint8Array&&r(Uint8Array),e=>S&&e instanceof S);var S;const R=c("HTMLFormElement"),A=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),L=c("RegExp"),N=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};C(n,((n,o)=>{!1!==t(n,o,e)&&(s[o]=n)})),Object.defineProperties(e,s)},j="abcdefghijklmnopqrstuvwxyz",P="0123456789",U={DIGIT:P,ALPHA:j,ALPHA_DIGIT:j+j.toUpperCase()+P},$=c("AsyncFunction");var I={isArray:u,isArrayBuffer:m,isBuffer:function(e){return null!==e&&!h(e)&&null!==e.constructor&&!h(e.constructor)&&f(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||f(e.append)&&("formdata"===(t=i(e))||"object"===t&&f(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&m(e.buffer),t},isString:p,isNumber:d,isBoolean:e=>!0===e||!1===e,isObject:g,isPlainObject:y,isUndefined:h,isDate:_,isFile:b,isBlob:w,isRegExp:L,isFunction:f,isStream:e=>g(e)&&f(e.pipe),isURLSearchParams:E,isTypedArray:x,isFileList:v,forEach:C,merge:function e(){const{caseless:t}=k(this)&&this||{},n={},s=(s,o)=>{const r=t&&T(n,o)||o;y(n[r])&&y(s)?n[r]=e(n[r],s):y(s)?n[r]=e({},s):u(s)?n[r]=s.slice():n[r]=s};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&C(arguments[e],s);return n},extend:(e,t,n,{allOwnKeys:o}={})=>(C(t,((t,o)=>{n&&f(t)?e[o]=s(t,n):e[o]=t}),{allOwnKeys:o}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,s)=>{let o,i,a;const c={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],s&&!s(a,e,t)||c[a]||(t[a]=e[a],c[a]=!0);e=!1!==n&&r(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:i,kindOfTest:c,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return-1!==s&&s===n},toArray:e=>{if(!e)return null;if(u(e))return e;let t=e.length;if(!d(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=n.next())&&!s.done;){const n=s.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const s=[];for(;null!==(n=e.exec(t));)s.push(n);return s},isHTMLForm:R,hasOwnProperty:A,hasOwnProp:A,reduceDescriptors:N,freezeMethods:e=>{N(e,((t,n)=>{if(f(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const s=e[n];f(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},s=e=>{e.forEach((e=>{n[e]=!0}))};return u(e)?s(e):s(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:T,global:O,isContextDefined:k,ALPHABET:U,generateString:(e=16,t=U.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n},isSpecCompliantForm:function(e){return!!(e&&f(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,s)=>{if(g(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[s]=e;const o=u(e)?[]:{};return C(e,((e,t)=>{const r=n(e,s+1);!h(r)&&(o[t]=r)})),t[s]=void 0,o}}return e};return n(e,0)},isAsyncFn:$,isThenable:e=>e&&(g(e)||f(e))&&f(e.then)&&f(e.catch)};function D(e,t,n,s,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),o&&(this.response=o)}I.inherits(D,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const M=D.prototype,F={};function B(e){return I.isPlainObject(e)||I.isArray(e)}function J(e){return I.endsWith(e,"[]")?e.slice(0,-2):e}function z(e,t,n){return e?e.concat(t).map((function(e,t){return e=J(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{F[e]={value:e}})),Object.defineProperties(D,F),Object.defineProperty(M,"isAxiosError",{value:!0}),D.from=(e,t,n,s,o,r)=>{const i=Object.create(M);return I.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),D.call(i,e.message,t,n,s,o),i.cause=e,i.name=e.name,r&&Object.assign(i,r),i};const q=I.toFlatObject(I,{},null,(function(e){return/^is[A-Z]/.test(e)}));function H(e,t,n){if(!I.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(n=I.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!I.isUndefined(t[e])}))).metaTokens,o=n.visitor||l,r=n.dots,i=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&I.isSpecCompliantForm(t);if(!I.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(I.isDate(e))return e.toISOString();if(!a&&I.isBlob(e))throw new D("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(e)||I.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,o){let a=e;if(e&&!o&&"object"==typeof e)if(I.endsWith(n,"{}"))n=s?n:n.slice(0,-2),e=JSON.stringify(e);else if(I.isArray(e)&&function(e){return I.isArray(e)&&!e.some(B)}(e)||(I.isFileList(e)||I.endsWith(n,"[]"))&&(a=I.toArray(e)))return n=J(n),a.forEach((function(e,s){!I.isUndefined(e)&&null!==e&&t.append(!0===i?z([n],s,r):null===i?n:n+"[]",c(e))})),!1;return!!B(e)||(t.append(z(o,n,r),c(e)),!1)}const u=[],h=Object.assign(q,{defaultVisitor:l,convertValue:c,isVisitable:B});if(!I.isObject(e))throw new TypeError("data must be an object");return function e(n,s){if(!I.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+s.join("."));u.push(n),I.forEach(n,(function(n,r){!0===(!(I.isUndefined(n)||null===n)&&o.call(t,n,I.isString(r)?r.trim():r,s,h))&&e(n,s?s.concat(r):[r])})),u.pop()}}(e),t}function G(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function W(e,t){this._pairs=[],e&&H(e,this,t)}const V=W.prototype;function K(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function X(e,t,n){if(!t)return e;const s=n&&n.encode||K,o=n&&n.serialize;let r;if(r=o?o(t,n):I.isURLSearchParams(t)?t.toString():new W(t,n).toString(s),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}V.append=function(e,t){this._pairs.push([e,t])},V.toString=function(e){const t=e?function(t){return e.call(this,t,G)}:G;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Y=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){I.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Q={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:W,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function ee(e){function t(e,n,s,o){let r=e[o++];const i=Number.isFinite(+r),a=o>=e.length;return r=!r&&I.isArray(s)?s.length:r,a?(I.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!i):(s[r]&&I.isObject(s[r])||(s[r]=[]),t(e,n,s[r],o)&&I.isArray(s[r])&&(s[r]=function(e){const t={},n=Object.keys(e);let s;const o=n.length;let r;for(s=0;s<o;s++)r=n[s],t[r]=e[r];return t}(s[r])),!i)}if(I.isFormData(e)&&I.isFunction(e.entries)){const n={};return I.forEachEntry(e,((e,s)=>{t(function(e){return I.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),s,n,0)})),n}return null}const te={"Content-Type":void 0},ne={transitional:Q,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,o=I.isObject(e);if(o&&I.isHTMLForm(e)&&(e=new FormData(e)),I.isFormData(e))return s&&s?JSON.stringify(ee(e)):e;if(I.isArrayBuffer(e)||I.isBuffer(e)||I.isStream(e)||I.isFile(e)||I.isBlob(e))return e;if(I.isArrayBufferView(e))return e.buffer;if(I.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return H(e,new Z.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,s){return Z.isNode&&I.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=I.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return H(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||s?(t.setContentType("application/json",!1),function(e,t,n){if(I.isString(e))try{return(0,JSON.parse)(e),I.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ne.transitional,n=t&&t.forcedJSONParsing,s="json"===this.responseType;if(e&&I.isString(e)&&(n&&!this.responseType||s)){const n=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw D.from(e,D.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Z.classes.FormData,Blob:Z.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};I.forEach(["delete","get","head"],(function(e){ne.headers[e]={}})),I.forEach(["post","put","patch"],(function(e){ne.headers[e]=I.merge(te)}));var se=ne;const oe=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),re=Symbol("internals");function ie(e){return e&&String(e).trim().toLowerCase()}function ae(e){return!1===e||null==e?e:I.isArray(e)?e.map(ae):String(e)}function ce(e,t,n,s,o){return I.isFunction(s)?s.call(this,t,n):(o&&(t=n),I.isString(t)?I.isString(s)?-1!==t.indexOf(s):I.isRegExp(s)?s.test(t):void 0:void 0)}class le{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function o(e,t,n){const o=ie(t);if(!o)throw new Error("header name must be a non-empty string");const r=I.findKey(s,o);(!r||void 0===s[r]||!0===n||void 0===n&&!1!==s[r])&&(s[r||t]=ae(e))}const r=(e,t)=>I.forEach(e,((e,n)=>o(e,n,t)));return I.isPlainObject(e)||e instanceof this.constructor?r(e,t):I.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?r((e=>{const t={};let n,s,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),s=e.substring(o+1).trim(),!n||t[n]&&oe[n]||("set-cookie"===n?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)})),t})(e),t):null!=e&&o(t,e,n),this}get(e,t){if(e=ie(e)){const n=I.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}(e);if(I.isFunction(t))return t.call(this,e,n);if(I.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ie(e)){const n=I.findKey(this,e);return!(!n||void 0===this[n]||t&&!ce(0,this[n],n,t))}return!1}delete(e,t){const n=this;let s=!1;function o(e){if(e=ie(e)){const o=I.findKey(n,e);!o||t&&!ce(0,n[o],o,t)||(delete n[o],s=!0)}}return I.isArray(e)?e.forEach(o):o(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const o=t[n];e&&!ce(0,this[o],o,e,!0)||(delete this[o],s=!0)}return s}normalize(e){const t=this,n={};return I.forEach(this,((s,o)=>{const r=I.findKey(n,o);if(r)return t[r]=ae(s),void delete t[o];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(o):String(o).trim();i!==o&&delete t[o],t[i]=ae(s),n[i]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return I.forEach(this,((n,s)=>{null!=n&&!1!==n&&(t[s]=e&&I.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[re]=this[re]={accessors:{}}).accessors,n=this.prototype;function s(e){const s=ie(e);t[s]||(function(e,t){const n=I.toCamelCase(" "+t);["get","set","has"].forEach((s=>{Object.defineProperty(e,s+n,{value:function(e,n,o){return this[s].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[s]=!0)}return I.isArray(e)?e.forEach(s):s(e),this}}le.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),I.freezeMethods(le.prototype),I.freezeMethods(le);var ue=le;function he(e,t){const n=this||se,s=t||n,o=ue.from(s.headers);let r=s.data;return I.forEach(e,(function(e){r=e.call(n,r,o.normalize(),t?t.status:void 0)})),o.normalize(),r}function me(e){return!(!e||!e.__CANCEL__)}function pe(e,t,n){D.call(this,null==e?"canceled":e,D.ERR_CANCELED,t,n),this.name="CanceledError"}I.inherits(pe,D,{__CANCEL__:!0});var fe=Z.isStandardBrowserEnv?{write:function(e,t,n,s,o,r){const i=[];i.push(e+"="+encodeURIComponent(t)),I.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),I.isString(s)&&i.push("path="+s),I.isString(o)&&i.push("domain="+o),!0===r&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function de(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var ge=Z.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function s(n){let s=n;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=s(window.location.href),function(e){const t=I.isString(e)?s(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function ye(e,t){let n=0;const s=function(e,t){e=e||10;const n=new Array(e),s=new Array(e);let o,r=0,i=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=s[i];o||(o=c),n[r]=a,s[r]=c;let u=i,h=0;for(;u!==r;)h+=n[u++],u%=e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),c-o<t)return;const m=l&&c-l;return m?Math.round(1e3*h/m):void 0}}(50,250);return o=>{const r=o.loaded,i=o.lengthComputable?o.total:void 0,a=r-n,c=s(a);n=r;const l={loaded:r,total:i,progress:i?r/i:void 0,bytes:a,rate:c||void 0,estimated:c&&i&&r<=i?(i-r)/c:void 0,event:o};l[t?"download":"upload"]=!0,e(l)}}const _e={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let s=e.data;const o=ue.from(e.headers).normalize(),r=e.responseType;let i;function a(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}I.isFormData(s)&&(Z.isStandardBrowserEnv||Z.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(t+":"+n))}const l=de(e.baseURL,e.url);function u(){if(!c)return;const s=ue.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){const s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(new D("Request failed with status code "+n.status,[D.ERR_BAD_REQUEST,D.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),a()}),(function(e){n(e),a()}),{data:r&&"text"!==r&&"json"!==r?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:s,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),X(l,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=u:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(u)},c.onabort=function(){c&&(n(new D("Request aborted",D.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new D("Network Error",D.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const s=e.transitional||Q;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new D(t,s.clarifyTimeoutError?D.ETIMEDOUT:D.ECONNABORTED,e,c)),c=null},Z.isStandardBrowserEnv){const t=(e.withCredentials||ge(l))&&e.xsrfCookieName&&fe.read(e.xsrfCookieName);t&&o.set(e.xsrfHeaderName,t)}void 0===s&&o.setContentType(null),"setRequestHeader"in c&&I.forEach(o.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),I.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),r&&"json"!==r&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",ye(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",ye(e.onUploadProgress)),(e.cancelToken||e.signal)&&(i=t=>{c&&(n(!t||t.type?new pe(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(l);h&&-1===Z.protocols.indexOf(h)?n(new D("Unsupported protocol "+h+":",D.ERR_BAD_REQUEST,e)):c.send(s||null)}))}};I.forEach(_e,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));function be(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new pe(null,e)}function we(e){return be(e),e.headers=ue.from(e.headers),e.data=he.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),(e=>{e=I.isArray(e)?e:[e];const{length:t}=e;let n,s;for(let o=0;o<t&&(n=e[o],!(s=I.isString(n)?_e[n.toLowerCase()]:n));o++);if(!s){if(!1===s)throw new D(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(I.hasOwnProp(_e,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`)}if(!I.isFunction(s))throw new TypeError("adapter is not a function");return s})(e.adapter||se.adapter)(e).then((function(t){return be(e),t.data=he.call(e,e.transformResponse,t),t.headers=ue.from(t.headers),t}),(function(t){return me(t)||(be(e),t&&t.response&&(t.response.data=he.call(e,e.transformResponse,t.response),t.response.headers=ue.from(t.response.headers))),Promise.reject(t)}))}const ve=e=>e instanceof ue?e.toJSON():e;function Ee(e,t){t=t||{};const n={};function s(e,t,n){return I.isPlainObject(e)&&I.isPlainObject(t)?I.merge.call({caseless:n},e,t):I.isPlainObject(t)?I.merge({},t):I.isArray(t)?t.slice():t}function o(e,t,n){return I.isUndefined(t)?I.isUndefined(e)?void 0:s(void 0,e,n):s(e,t,n)}function r(e,t){if(!I.isUndefined(t))return s(void 0,t)}function i(e,t){return I.isUndefined(t)?I.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function a(n,o,r){return r in t?s(n,o):r in e?s(void 0,n):void 0}const c={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(e,t)=>o(ve(e),ve(t),!0)};return I.forEach(Object.keys(Object.assign({},e,t)),(function(s){const r=c[s]||o,i=r(e[s],t[s],s);I.isUndefined(i)&&r!==a||(n[s]=i)})),n}const Ce={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ce[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Te={};Ce.transitional=function(e,t,n){function s(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,r)=>{if(!1===e)throw new D(s(o," has been removed"+(t?" in "+t:"")),D.ERR_DEPRECATED);return t&&!Te[o]&&(Te[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,r)}};var Oe={assertOptions:function(e,t,n){if("object"!=typeof e)throw new D("options must be an object",D.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let o=s.length;for(;o-- >0;){const r=s[o],i=t[r];if(i){const t=e[r],n=void 0===t||i(t,r,e);if(!0!==n)throw new D("option "+r+" must be "+n,D.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new D("Unknown option "+r,D.ERR_BAD_OPTION)}},validators:Ce};const ke=Oe.validators;class xe{constructor(e){this.defaults=e,this.interceptors={request:new Y,response:new Y}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ee(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:o}=t;let r;void 0!==n&&Oe.assertOptions(n,{silentJSONParsing:ke.transitional(ke.boolean),forcedJSONParsing:ke.transitional(ke.boolean),clarifyTimeoutError:ke.transitional(ke.boolean)},!1),null!=s&&(I.isFunction(s)?t.paramsSerializer={serialize:s}:Oe.assertOptions(s,{encode:ke.function,serialize:ke.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),r=o&&I.merge(o.common,o[t.method]),r&&I.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=ue.concat(r,o);const i=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[we.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);h<u;)l=l.then(e[h++],e[h++]);return l}u=i.length;let m=t;for(h=0;h<u;){const e=i[h++],t=i[h++];try{m=e(m)}catch(e){t.call(this,e);break}}try{l=we.call(this,m)}catch(e){return Promise.reject(e)}for(h=0,u=c.length;h<u;)l=l.then(c[h++],c[h++]);return l}getUri(e){return X(de((e=Ee(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}I.forEach(["delete","get","head","options"],(function(e){xe.prototype[e]=function(t,n){return this.request(Ee(n||{},{method:e,url:t,data:(n||{}).data}))}})),I.forEach(["post","put","patch"],(function(e){function t(t){return function(n,s,o){return this.request(Ee(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:s}))}}xe.prototype[e]=t(),xe.prototype[e+"Form"]=t(!0)}));var Se=xe;class Re{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const s=new Promise((e=>{n.subscribe(e),t=e})).then(e);return s.cancel=function(){n.unsubscribe(t)},s},e((function(e,s,o){n.reason||(n.reason=new pe(e,s,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Re((function(t){e=t})),cancel:e}}}var Ae=Re;const Le={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Le).forEach((([e,t])=>{Le[t]=e}));var Ne=Le;const je=function e(t){const n=new Se(t),o=s(Se.prototype.request,n);return I.extend(o,Se.prototype,n,{allOwnKeys:!0}),I.extend(o,n,null,{allOwnKeys:!0}),o.create=function(n){return e(Ee(t,n))},o}(se);je.Axios=Se,je.CanceledError=pe,je.CancelToken=Ae,je.isCancel=me,je.VERSION="1.4.0",je.toFormData=H,je.AxiosError=D,je.Cancel=je.CanceledError,je.all=function(e){return Promise.all(e)},je.spread=function(e){return function(t){return e.apply(null,t)}},je.isAxiosError=function(e){return I.isObject(e)&&!0===e.isAxiosError},je.mergeConfig=Ee,je.AxiosHeaders=ue,je.formToJSON=e=>ee(I.isHTMLForm(e)?new FormData(e):e),je.HttpStatusCode=Ne,je.default=je,e.exports=je}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";t=function(){return n};var n={},s=Object.prototype,o=s.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function h(e,t,n,s){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(s||[]);return r(i,"_invoke",{value:C(e,n,a)}),i}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=h;var p={};function f(){}function d(){}function g(){}var y={};u(y,a,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(S([])));b&&b!==s&&o.call(b,a)&&(y=b);var w=g.prototype=f.prototype=Object.create(y);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(t,n){function s(r,i,a,c){var l=m(t[r],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==e(h)&&o.call(h,"__await")?n.resolve(h.__await).then((function(e){s("next",e,a,c)}),(function(e){s("throw",e,a,c)})):n.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return s("throw",e,a,c)}))}c(l.arg)}var i;r(this,"_invoke",{value:function(e,t){function o(){return new n((function(n,o){s(e,t,n,o)}))}return i=i?i.then(o,o):o()}})}function C(e,t,n){var s="suspendedStart";return function(o,r){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===o)throw r;return{value:void 0,done:!0}}for(n.method=o,n.arg=r;;){var i=n.delegate;if(i){var a=T(i,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===s)throw s="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s="executing";var c=m(e,t,n);if("normal"===c.type){if(s=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(s="completed",n.method="throw",n.arg=c.arg)}}}function T(e,t){var n=t.method,s=e.iterator[n];if(void 0===s)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=m(s,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:R}}function R(){return{value:void 0,done:!0}}return d.prototype=g,r(w,"constructor",{value:g,configurable:!0}),r(g,"constructor",{value:d,configurable:!0}),d.displayName=u(g,l,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},n.awrap=function(e){return{__await:e}},v(E.prototype),u(E.prototype,c,(function(){return this})),n.AsyncIterator=E,n.async=function(e,t,s,o,r){void 0===r&&(r=Promise);var i=new E(h(e,t,s,o),r);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(w),u(w,l,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var s in t)n.push(s);return n.reverse(),function e(){for(;n.length;){var s=n.pop();if(s in t)return e.value=s,e.done=!1,e}return e.done=!0,e}},n.values=S,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,s){return i.type="throw",i.arg=e,t.next=n,s&&(t.method="next",t.arg=void 0),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s],i=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var a=o.call(r,"catchLoc"),c=o.call(r,"finallyLoc");if(a&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&o.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var r=s;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var s=n.completion;if("throw"===s.type){var o=s.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},n}function s(e,t,n,s,o,r,i){try{var a=e[r](i),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(s,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){s(i,o,r,a,c,"next",e)}function c(e){s(i,o,r,a,c,"throw",e)}a(void 0)}))}}var r=n(4993),i=n(7218),a="YOUR_TWITCH_CLIENT_ID",c="YOUR_NETLIFY_FUNCTION_URL";function l(){return u.apply(this,arguments)}function u(){return(u=o(t().mark((function e(){var n,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.get(c);case 3:if(200===(n=e.sent).status){e.next=6;break}throw new Error("Error initiating Twitch OAuth: HTTP ".concat(n.status));case 6:if(s=n.data.access_token){e.next=9;break}throw new Error("Error initiating Twitch OAuth: No access token returned");case 9:chrome.storage.sync.get(["encryptionKey"],(function(e){if(chrome.runtime.lastError)return console.error("Error loading encryption key:",chrome.runtime.lastError),void w("Error loading encryption key: "+chrome.runtime.lastError.message);var t=e.encryptionKey;if(!t)return console.error("Error: Encryption key not found"),void w("Error: Encryption key not found");var n=v(s,t);chrome.storage.sync.set({twitchAccessToken:n},(function(){chrome.runtime.lastError&&(console.error("Error storing Twitch access token:",chrome.runtime.lastError),w("Error storing Twitch access token: "+chrome.runtime.lastError.message))}))})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error initiating Twitch OAuth:",e.t0),w("Error initiating Twitch OAuth: "+e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function h(e,t){return m.apply(this,arguments)}function m(){return(m=o(t().mark((function e(n,s){var o,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.twitch.tv/helix/users",{headers:{Authorization:"Bearer ".concat(n),"Client-Id":s}});case 3:if(200===(o=e.sent).status){e.next=6;break}throw new Error("Error getting current Twitch channel: HTTP ".concat(o.status));case 6:return e.next=8,o.json();case 8:return r=e.sent,e.abrupt("return",r.data[0].login);case 12:e.prev=12,e.t0=e.catch(0),console.error("Error getting current Twitch channel:",e.t0),t="Error getting current Twitch channel: "+e.t0.message,chrome.notifications.create({type:"basic",iconUrl:"icon.png",title:"StreamMatey Warning",message:t});case 16:case"end":return e.stop()}var t}),e,null,[[0,12]])})))).apply(this,arguments)}new perspective.ApiClient,chrome.action.onClicked.addListener((function(){chrome.tabs.create({url:"options.html"})})),chrome.runtime.onMessage.addListener((function(e,t,n){"initiateTwitchOAuth"===e.message&&l()})),chrome.runtime.onMessage.addListener((function(e,t,n){if("analyzeSentiment"===e.type||"analyzeToxicity"===e.type){var s=e.comment,o="https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=".concat(OAUTH_CLIENT_ID),r={comment:{text:s},languages:["en"],requestedAttributes:{TOXICITY:{}}};return fetch(o,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.attributeScores.TOXICITY.summaryScore.value;n({score:t})})).catch((function(e){console.error("Error:",e),n({error:"Error analyzing comment"})})),!0}}));var p=function(){var e=o(t().mark((function e(n,s,o,r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return");case 2:if(i=null,a=null,e.prev=4,enableSentimentAnalysis&&(i=analyzeSentiment(o)),!enableToxicityDetection){e.next=10;break}return e.next=9,analyzeToxicity(o);case 9:a=e.sent;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("Error analyzing message:",e.t0);case 15:null!==i&&null!==a?f(i,a,s.username):null!==i?d(i,s.username):null!==a&&g(a,s.username);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n,s,o){return e.apply(this,arguments)}}(),f=function(e,t,n){e<sentimentOptions.threshold&&t>toxicityOptions.threshold&&y(n)},d=function(e,t){e<sentimentOptions.threshold&&y(t)},g=function(e,t){e>toxicityOptions.threshold&&y(t)},y=function(e){warningToxicUser&&sendWarning(e,warningMessageToxic),customMessageToxicUser&&sendCustomMessage(e,customMessageToxic),customMessageNegativeUser&&sendCustomMessage(e,customMessageNegative)};function _(){return b.apply(this,arguments)}function b(){return b=o(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{chrome.storage.sync.get(["twitchAccessToken","encryptionKey"],function(){var e=o(t().mark((function e(n){var s,o,i,c,l,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!chrome.runtime.lastError){e.next=4;break}return console.error("Error loading Twitch access token or encryption key:",chrome.runtime.lastError),w("Error loading Twitch access token or encryption key: "+chrome.runtime.lastError.message),e.abrupt("return");case 4:if(s=n.twitchAccessToken,o=n.encryptionKey,s&&o){e.next=10;break}return console.error("Error: Twitch access token or encryption key not found"),w("Error: Twitch access token or encryption key not found"),e.abrupt("return");case 10:return e.next=12,C(s,o);case 12:return i=e.sent,e.next=15,h(i,a);case 15:c=e.sent,l={options:{debug:!0},connection:{reconnect:!0},identity:{username:c,password:"oauth:".concat(i)},channels:[c]},(u=new r.client(l)).connect(),u.on("message",p);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(e){console.error("Error monitoring Twitch chat:",e),w("Error monitoring Twitch chat: "+e.message)}case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function w(e){chrome.notifications.create({type:"basic",iconUrl:"icon.png",title:"StreamMatey Error",message:e})}function v(e,t){return E.apply(this,arguments)}function E(){return(E=o(t().mark((function e(n,s){var o,r,i,a,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.importKey("jwk",s,{name:"AES-GCM"},!1,["encrypt","decrypt"]);case 2:return o=e.sent,r=(new TextEncoder).encode(JSON.stringify(n)),i=window.crypto.getRandomValues(new Uint8Array(12)),e.prev=5,e.next=8,window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},o,r);case 8:return a=e.sent,c=btoa(unescape(encodeURIComponent(String.fromCharCode.apply(null,new Uint8Array(a))))),e.abrupt("return",btoa(unescape(encodeURIComponent(String.fromCharCode.apply(null,i))))+","+c);case 13:throw e.prev=13,e.t0=e.catch(5),console.error(e.t0),w("Error encrypting data: "+e.t0.message),e.t0;case 18:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function C(e,t){return T.apply(this,arguments)}function T(){return(T=o(t().mark((function e(n,s){var o,r,i,a,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.importKey("jwk",s,{name:"AES-GCM"},!1,["encrypt","decrypt"]);case 2:return o=e.sent,r=n.split(","),i=new Uint8Array(decodeURIComponent(escape(atob(r[0]))).split("").map((function(e){return e.charCodeAt(0)}))),a=new Uint8Array(decodeURIComponent(escape(atob(r[1]))).split("").map((function(e){return e.charCodeAt(0)}))),e.prev=6,e.next=9,window.crypto.subtle.decrypt({name:"AES-GCM",iv:i},o,a);case 9:return c=e.sent,e.abrupt("return",JSON.parse((new TextDecoder).decode(c)));case 13:throw e.prev=13,e.t0=e.catch(6),console.error(e.t0),w("Error decrypting data: "+e.t0.message),e.t0;case 18:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}chrome.runtime.onInstalled.addListener(_),chrome.runtime.onMessage.addListener((function(e,t,n){"initiateTwitchOAuth"===e.message?l():"fetchChatMessages"===e.message?fetchChatMessages(e.channel).then((function(e){return n(e)})).catch((function(e){return console.error("Error fetching chat messages:",e)})):"monitorTwitchChat"===e.message&&_()})),chrome.storage.sync.get("twitchAccessToken",(function(e){e.twitchAccessToken||(console.error("Error: Twitch access token not found"),w("Error: Twitch access token not found"))})),chrome.action.onClicked.addListener((function(){chrome.tabs.create({url:"options.html"})}))})()})();